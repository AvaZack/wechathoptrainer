# wechathoptrainer
A trainer of wechat game 跳一跳 based on opencv340

运行环境为Android

算法概述:

#step1:
获取设备截图然后存储。
你可以直接用命令行screencap -p，也可以使用view.SurfaceControl的screenshot方法

#step2:
截取小人的图像 用ps抠出透明背景图

#step3:
使用cv模板匹配matchTemplate方法定位小人位置

#step4:
找出与目标点的对称点，计算与目标点的距离

#step5:
根据系数，计算长按时间，下发长按事件，完成跳跃

#关键步骤
上一次跳跃可能存在误差，导致跳过远或者过近，然后在计算对称点距离时，会导致误差的积累。所以在计算与目标点距离时，需要做一次修正。
修正只针对于此次方向与上一次方向不同时情况。
方法如下：
跳跃的角度是固定的，所以无论过远或者过近都只在一个斜率固定的直线上，那本次跳跃的方向斜率和上一次应该互为相反数，那已知两个斜率和两个坐标，
求出两条直线的交点就是我们要的修正点。

目前这个算法无法修正同方向上的误差，所以最高只跳到了2600多分。后面还会采用使用cv识别目标块的方法。
